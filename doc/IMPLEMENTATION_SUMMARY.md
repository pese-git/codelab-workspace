# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å–∏—Å—Ç–µ–º—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–î–∞—Ç–∞:** 30 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û - –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ**  
**–í–µ—Ä—Å–∏—è:** 1.0

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã

### ‚úÖ –§–∞–∑–∞ 1: –ê–Ω–∞–ª–∏–∑ –∏ –∞—É–¥–∏—Ç
- [x] –ü—Ä–æ–≤–µ–¥–µ–Ω –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ agent-runtime
- [x] –í—ã—è–≤–ª–µ–Ω—ã –ø—Ä–æ–±–µ–ª—ã –∏ –æ—Ç–ª–∏—á–∏—è –æ—Ç –¢–ó
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- [x] –û—Ü–µ–Ω–µ–Ω—ã —Ä–∏—Å–∫–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–∫—É–º–µ–Ω—Ç [–ê—É–¥–∏—Ç —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](audit-report.md)

### ‚úÖ –§–∞–∑–∞ 2: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] –°–æ–∑–¥–∞–Ω–∞ –æ–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- [x] –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ 4 –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
  - FSM Orchestrator (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º)
  - Task Classifier (–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–¥–∞—á)
  - Execution Engine (–∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤)
  - Plan Repository (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- [x] –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã –¥–∏–∞–≥—Ä–∞–º–º—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –ø–æ—Ç–æ–∫–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- üìñ [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](planning-system-architecture.md)
- üìñ [FSM Orchestrator –¥–∏–∑–∞–π–Ω](fsm-orchestrator-design.md)
- üìñ [Execution Engine –¥–∏–∑–∞–π–Ω](execution-engine-design.md)
- üìñ [Task Classifier –¥–∏–∑–∞–π–Ω](task-classifier-design.md)
- üìñ [Plan Repository –¥–∏–∑–∞–π–Ω](plan-repository-design.md)

### ‚úÖ –§–∞–∑–∞ 3: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [x] –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ 6 —Ñ–∞–∑ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (8 –Ω–µ–¥–µ–ª—å)
- [x] –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º (P0, P1, P2)
- [x] –û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏
- [x] –°–æ–∑–¥–∞–Ω–∏–µ comprehensive todo list (120+ –∑–∞–¥–∞—á)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Detailed todo list –≤ —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ

### ‚úÖ –§–∞–∑–∞ 4: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- [x] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [x] –°–æ–∑–¥–∞–Ω –∏—Ç–æ–≥–æ–≤—ã–π README

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** üìñ [PLANNING_SYSTEM_README.md](PLANNING_SYSTEM_README.md)

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Ö–æ–¥–∫–∏

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–¥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ø—Ä–æ—á–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç —Å Clean Architecture
- ‚úÖ –ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç FSM –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
- ‚ùå –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ø–ª–∞–Ω–æ–≤
- ‚ùå –ù–µ—Ç —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–¥–∞—á
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç Runtime Guards

### –ü–ª–∞–Ω–∏—Ä—É–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø–æ—Å–ª–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- ‚úÖ FSM Orchestrator —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º lifecycle
- ‚úÖ –°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–¥—É—Ç –≤ Architect
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞–Ω —Å –ø–æ–¥–∑–∞–¥–∞—á–∞–º–∏
- ‚úÖ ExecutionEngine –∏—Å–ø–æ–ª–Ω—è–µ—Ç –ø–ª–∞–Ω —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- ‚úÖ Runtime Guards –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∞

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –§–ê–ó–ê 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–ù–µ–¥–µ–ª—è 1)
```
–ó–∞–¥–∞—á–∏:
- –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –¥–∏–∑–∞–π–Ω–∞ —Å –∫–æ–º–∞–Ω–¥–æ–π
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (branches, CI/CD)
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–∏–Ω—Ç–æ–≤
```

### –§–ê–ó–ê 2: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–ù–µ–¥–µ–ª—è 2-3)
```
–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ:
- Task Classifier (LLM + fallback)
- Plan Repository (SQLAlchemy + Alembic)
–ö—Ä–∏—Ç–µ—Ä–∏–∏: >90% coverage, –≤—Å–µ unit —Ç–µ—Å—Ç—ã
```

### –§–ê–ó–ê 3: –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã (–ù–µ–¥–µ–ª—è 4-5)
```
–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ:
- FSM Orchestrator (–≤—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã)
- Execution Engine (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ + is–ø–æ–ª–Ω–µ–Ω–∏–µ)
–ö—Ä–∏—Ç–µ—Ä–∏–∏: E2E —Ç–µ—Å—Ç—ã, –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
```

### –§–ê–ó–ê 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ù–µ–¥–µ–ª—è 6)
```
–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ:
- OrchestratorAgent + FSM
- Error handling –∏ retry
- API endpoints
–ö—Ä–∏—Ç–µ—Ä–∏–∏: –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, regression —Ç–µ—Å—Ç—ã
```

### –§–ê–ó–ê 5: –ó–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã (–ù–µ–¥–µ–ª—è 7)
```
–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ:
- Runtime Guards
- Validation Layer
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
–ö—Ä–∏—Ç–µ—Ä–∏–∏: –≤—Å–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
```

### –§–ê–ó–ê 6: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è (–ù–µ–¥–µ–ª—è 8)
```
–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ:
- E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- Production readiness checks
–ö—Ä–∏—Ç–µ—Ä–∏–∏: coverage >85%, –≤—Å–µ —Ç–µ—Å—Ç—ã ‚úÖ
```

---

## üöÄ –ö–∞–∫ –Ω–∞—á–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –°–æ–∑–¥–∞—Ç—å branch
git checkout -b feature/planning-system

# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
git pull origin develop

# –°–æ–∑–¥–∞—Ç—å feature branch –¥–ª—è –≤–∞—à–µ–π —á–∞—Å—Ç–∏
git checkout -b feature/task-classifier
```

### 2. –í—ã–±—Ä–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫:
1. **Task Classifier** (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π, –Ω–µ –∏–º–µ–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
2. **Plan Repository** (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å Classifier)
3. **FSM Orchestrator** (—Ç—Ä–µ–±—É–µ—Ç –æ–±–æ–∏—Ö –≤—ã—à–µ)
4. **Execution Engine** (—Ç—Ä–µ–±—É–µ—Ç Repository + FSM)
5. **Integration** (—Ç—Ä–µ–±—É–µ—Ç –≤—Å–µ—Ö –≤—ã—à–µ)

### 3. –°–ª–µ–¥–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
```
–î–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ X:
1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ planning-system-architecture.md ‚Üí —Ä–∞–∑–¥–µ–ª X
2. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ X-design.md (–≤–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç)
3. –°–ª–µ–¥—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ –¥–∏–∑–∞–π–Ω–∞
4. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
5. –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏"
6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã (>85% coverage)
7. –°–æ–∑–¥–∞–π—Ç–µ Pull Request
```

### 4. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ Pull Request
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (`pytest tests/`)
- [ ] Coverage >85% (`pytest --cov`)
- [ ] –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–∏–∑–∞–π–Ω—É –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- [ ] Docstrings –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- [ ] Code follows PEP 8

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ (–ø—Ä–æ—á–∏—Ç–∞—Ç—å –¥–æ –Ω–∞—á–∞–ª–∞)
1. üìñ [PLANNING_SYSTEM_README.md](PLANNING_SYSTEM_README.md) ‚Äî 15 –º–∏–Ω
2. üìñ [planning-system-architecture.md](planning-system-architecture.md) ‚Äî 30 –º–∏–Ω
3. üìñ [X-design.md](fsm-orchestrator-design.md) –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ‚Äî 20 –º–∏–Ω

### –°–ø—Ä–∞–≤–æ—á–Ω—ã–µ (–ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
- [–ê—É–¥–∏—Ç —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](audit-report.md)
- [–ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](DEVELOPMENT_PLAN.md)
- –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è [README –∞–≥–µ–Ω—Ç–∞](../agent-runtime/README.md)

---

## üß™ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### Unit —Ç–µ—Å—Ç—ã
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest tests/ -v

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
pytest tests/test_task_classifier.py -v
pytest tests/test_fsm_orchestrator.py -v

# –° coverage
pytest tests/ --cov=app --cov-report=html
```

### Integration —Ç–µ—Å—Ç—ã
```bash
pytest tests/e2e/test_planning_workflow.py -v
```

### Fixtures (–ø–æ–º–æ—â–Ω–∏–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤)
–í—Å–µ needed fixtures —É–∂–µ –æ–ø–∏—Å–∞–Ω—ã –≤ –¥–∏–∑–∞–π–Ω-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö.
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –∫–∞–∫ –ø—Ä–∏–º–µ—Ä—ã.

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- [ ] –í—Å–µ –º–µ—Ç–æ–¥—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –¥–∏–∑–∞–π–Ω—É
- [ ] Unit —Ç–µ—Å—Ç—ã: 100% coverage –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π
- [ ] –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏–∑ –¥–∏–∑–∞–π–Ω–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ù–µ—Ç deprecation warnings
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ DEBUG, INFO, ERROR —É—Ä–æ–≤–Ω—è—Ö

### –î–ª—è —Å–∏—Å—Ç–µ–º—ã –≤ —Ü–µ–ª–æ–º
- [ ] Test coverage: >85%
- [ ] E2E —Ç–µ—Å—Ç—ã: 100% pass rate
- [ ] Performance: plan execution < 5s overhead
- [ ] –í—Å–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–æ–±–ª—é–¥–∞—é—Ç—Å—è
- [ ] –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

---

## üîë –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

### ‚ú® –ö–ª—é—á–µ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
```python
# –≠—Ç–æ –ù–ï–†–ê–ó–†–´–í–ù–û–ï –ø—Ä–∞–≤–∏–ª–æ!
if is_atomic == False:
    agent MUST BE "plan"  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ Architect!
```

### üö´ –ñ—ë—Å—Ç–∫–∏–µ –∑–∞–ø—Ä–µ—Ç—ã
- ‚ùå Architect –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ subtask
- ‚ùå –ê–≥–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å switch_mode
- ‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ FSM –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ ‚Üí exception
- ‚ùå –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –ø–ª–∞–Ω—ã ‚Üí rejection

### ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –í—Å–µ –º–µ—Ç–æ–¥—ã –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –¢–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –ø—É—Ç–µ–π

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–æ–≤–µ—Ä–∫–∞ |
|---------|-----------------|----------|
| Test Coverage | > 85% | `pytest --cov` |
| E2E Pass Rate | 100% | `pytest tests/e2e/` |
| Exec Time | < 5s overhead | load tests |
| Classification Accuracy | > 90% | classifier tests |
| Plan Success Rate | > 85% | execution tests |

---

## üéì –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ

```
codelab-ai-service/agent-runtime/
‚îú‚îÄ‚îÄ app/domain/entities/
‚îÇ   ‚îú‚îÄ‚îÄ plan.py                 # ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–∏—Å–ø–æ–ª—å–∑—É–µ–º!)
‚îÇ   ‚îú‚îÄ‚îÄ agent_context.py        # ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
‚îÇ   ‚îî‚îÄ‚îÄ fsm_state.py            # üÜï –°–æ–∑–¥–∞–¥–∏–º
‚îÇ
‚îú‚îÄ‚îÄ app/domain/services/
‚îÇ   ‚îú‚îÄ‚îÄ agent_orchestration.py  # ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
‚îÇ   ‚îú‚îÄ‚îÄ fsm_orchestrator.py     # üÜï –°–æ–∑–¥–∞–¥–∏–º
‚îÇ   ‚îú‚îÄ‚îÄ task_classifier.py      # üÜï –°–æ–∑–¥–∞–¥–∏–º
‚îÇ   ‚îú‚îÄ‚îÄ execution_engine.py     # üÜï –°–æ–∑–¥–∞–¥–∏–º
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ app/domain/repositories/
‚îÇ   ‚îú‚îÄ‚îÄ plan_repository.py      # üÜï –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ
‚îú‚îÄ‚îÄ app/infrastructure/persistence/
‚îÇ   ‚îú‚îÄ‚îÄ models/plan.py          # üÜï SQLAlchemy
‚îÇ   ‚îú‚îÄ‚îÄ mappers/plan_mapper.py  # üÜï Domain ‚Üî DB
‚îÇ   ‚îî‚îÄ‚îÄ repositories/plan_repository_impl.py  # üÜï –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ
‚îî‚îÄ‚îÄ tests/
    ‚îú‚îÄ‚îÄ test_fsm_orchestrator.py       # üÜï
    ‚îú‚îÄ‚îÄ test_task_classifier.py        # üÜï
    ‚îú‚îÄ‚îÄ test_execution_engine.py       # üÜï
    ‚îú‚îÄ‚îÄ test_plan_repository.py        # üÜï
    ‚îî‚îÄ‚îÄ e2e/test_planning_workflow.py  # üÜï
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (—Å–µ–≥–æ–¥–Ω—è)
1. ‚úÖ –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ ALL –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
2. ‚úÖ –û–±—Å—É–¥–∏—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –∫–æ–º–∞–Ω–¥–æ–π
3. ‚úÖ –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã (issues –≤ GitHub)

### –ù–∞ –Ω–µ–¥–µ–ª–µ 1 (–ù–µ–¥–µ–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏)
1. –°–æ–∑–¥–∞–π—Ç–µ branch
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã
4. –ù–∞—á–Ω–∏—Ç–µ —Å Task Classifier

### –ù–∞ –Ω–µ–¥–µ–ª–µ 2 (–ù–∞—á–∞–ª–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
1. Task Classifier (–æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ 1)
2. Plan Repository (–æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ 2)

---

## üìû –í–æ–ø—Ä–æ—Å—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–í–æ–ø—Ä–æ—Å—ã –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ?**
‚Üí –°–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –ø–æ—Ç–æ–º —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issue

**–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π?**
‚Üí Code review –≤ PR, –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –≤ comments

**–ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Å—Ç–∞–º–∏?**
‚Üí Debug –ª–æ–∫–∞–ª—å–Ω–æ, –¥–æ–±–∞–≤—å—Ç–µ logging

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –í—Ä–µ–º—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ | 4 —á–∞—Å–∞ |
| –î–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω–æ | 6 |
| –î–∏–∞–≥—Ä–∞–º–º | 8+ |
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö | 2000+ |
| –¢–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ | 50+ |
| TODO –∑–∞–¥–∞—á | 120+ |
| –ö—Ä–∏—Ç–µ—Ä–∏–µ–≤ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ | 25+ |

---

## üèÅ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –Ω–∞—á–∞–ª—É

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–´**

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã, –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
–ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ.

---

## üìÑ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞

### –ö–∞–∫ —á–∏—Ç–∞—Ç—å –¥–∏–∑–∞–π–Ω-–¥–æ–∫—É–º–µ–Ω—Ç
```
1. –û–±–∑–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (—á—Ç–æ –¥–µ–ª–∞–µ—Ç)
2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ (–≥–¥–µ –∂–∏–≤–µ—Ç)
3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–ø–æ–ª–Ω—ã–π –∫–æ–¥)
4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
5. –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (–∫–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å)
6. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (–∫–æ–≥–¥–∞ –≥–æ—Ç–æ–≤–æ)
```

### –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
```
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–µ
2. –ù–∞–ø–∏—à–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å/–±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –≤—Å–µ –º–µ—Ç–æ–¥—ã
4. –î–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
5. –ù–∞–ø–∏—à–∏—Ç–µ unit —Ç–µ—Å—Ç—ã
6. –ù–∞–ø–∏—à–∏—Ç–µ integration —Ç–µ—Å—Ç—ã
7. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã (coverage >85%)
8. –°–æ–∑–¥–∞–π—Ç–µ Pull Request
```

### –ö–∞–∫ –ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã
```python
@pytest.mark.asyncio
async def test_feature_name():
    """–û–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"""
    # Setup
    component = create_component()
    
    # Execute
    result = await component.method()
    
    # Assert
    assert result.is_correct()
```

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞:** 30 —è–Ω–≤–∞—Ä—è 2026  
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä:** Sergey Penkovsky  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

üöÄ **–í—ã –≥–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É!**
