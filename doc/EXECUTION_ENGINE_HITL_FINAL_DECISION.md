# –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: ExecutionEngine HITL —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

## üéØ –†–µ—à–µ–Ω–∏–µ

**–†–µ–∞–ª–∏–∑—É–µ–º –í–∞—Ä–∏–∞–Ω—Ç 1 (Polling) —Å —ç–≤–æ–ª—é—Ü–∏–µ–π –∫ –í–∞—Ä–∏–∞–Ω—Ç 3 (State Machine)**

## üìã –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–°–ï–ô–ß–ê–°) - Polling
**–í—Ä–µ–º—è**: 1-2 —á–∞—Å–∞  
**–¶–µ–ª—å**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–±–ª–µ–º—É

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
1. –î–æ–±–∞–≤–∏—Ç—å `get_pending_by_session()` –≤ ApprovalManager
2. –î–æ–±–∞–≤–∏—Ç—å `_wait_for_approvals()` –≤ ExecutionEngine
3. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `execute_plan()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ approvals
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

**–§–∞–π–ª—ã**:
- `approval_management.py` - 1 –º–µ—Ç–æ–¥
- `execution_engine.py` - 1 –º–µ—Ç–æ–¥ + –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è execute_plan
- `dependencies.py` - –ø–µ—Ä–µ–¥–∞—Ç—å ApprovalManager

### –≠—Ç–∞–ø 2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–ü–û–ó–ñ–ï) - State Machine
**–í—Ä–µ–º—è**: 1-2 –¥–Ω—è  
**–¶–µ–ª—å**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
1. –î–æ–±–∞–≤–∏—Ç—å ExecutionState enum
2. –î–æ–±–∞–≤–∏—Ç—å state management –≤ ExecutionEngine
3. –î–æ–±–∞–≤–∏—Ç—å transition logic
4. –î–æ–±–∞–≤–∏—Ç—å state persistence (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
5. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ç–µ—Å—Ç–æ–≤

## üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Å –≠—Ç–∞–ø–∞ 1

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:
1. ‚úÖ **–ë—ã—Å—Ç—Ä–æ**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞ 1-2 —á–∞—Å–∞
2. ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ**: –õ–µ–≥–∫–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
4. ‚úÖ **–≠–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–æ**: –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –ø–æ–∑–∂–µ

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:
- ‚úÖ ExecutionEngine –∂–¥–µ—Ç HITL approval
- ‚úÖ –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç status chunks (waiting_approval, resumed)
- ‚úÖ Timeout –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:
1. –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è approval
2. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ timeouts
3. Concurrent executions
4. CPU overhead –æ—Ç polling

–ï—Å–ª–∏ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã ‚Üí –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ State Machine.

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω
2. ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ
3. ‚û°Ô∏è **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è Polling**
4. ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
5. ‚è≥ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ production
6. ‚è≥ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤ State Machine (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
