# üìã –§–∞–∑–∞ 10: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ DDD - Quick Reference

**–°—Ç–∞—Ç—É—Å:** üü¢ –í –ø—Ä–æ—Ü–µ—Å—Å–µ (65% –∑–∞–≤–µ—Ä—à–µ–Ω–æ)  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 6 —Ñ–µ–≤—Ä–∞–ª—è 2026, 23:36 MSK

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 65%

‚úÖ –§–∞–∑–∞ 10.1: –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (100%)
‚úÖ –§–∞–∑–∞ 10.2: Repositories (100%)
‚úÖ –§–∞–∑–∞ 10.3: Adapters (100%)
‚ö†Ô∏è –§–∞–∑–∞ 10.4: Legacy Cleanup (60%)
‚è≥ –§–∞–∑–∞ 10.5: Full Cleanup (0%)
```

### –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

**–ù–∞—á–∞—Ç—å –§–∞–∑—É 10.5** - –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –æ—Ç Legacy –∫–æ–¥–∞ (5-8 —á–∞—Å–æ–≤)

üìñ **–ü–ª–∞–Ω:** [`agent-runtime-phase-10-5-legacy-cleanup-plan.md`](agent-runtime-phase-10-5-legacy-cleanup-plan.md)

---

## üìö –ö–ª—é—á–µ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

### –û—Ç—á–µ—Ç—ã –∏ –ø–ª–∞–Ω—ã

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –†–∞–∑–º–µ—Ä |
|----------|----------|--------|
| [`PHASE_10_PROGRESS_DASHBOARD.md`](PHASE_10_PROGRESS_DASHBOARD.md) | üìä –ü–æ–ª–Ω—ã–π dashboard –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ | 12K |
| [`PHASE_10_4_FINAL_REPORT.md`](PHASE_10_4_FINAL_REPORT.md) | üìã –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –§–∞–∑—ã 10.4 | 18K |
| [`agent-runtime-phase-10-5-legacy-cleanup-plan.md`](agent-runtime-phase-10-5-legacy-cleanup-plan.md) | üìù –ü–ª–∞–Ω –§–∞–∑—ã 10.5 | 15K |

### –ê–Ω–∞–ª–∏–∑ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| [`agent-runtime-phase-10-4-dependency-analysis.md`](agent-runtime-phase-10-4-dependency-analysis.md) | –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (35+ —Ñ–∞–π–ª–æ–≤) |
| [`agent-runtime-documentation.md`](agent-runtime-documentation.md) | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| [`agent-runtime-clean-architecture-audit.md`](agent-runtime-clean-architecture-audit.md) | –ê—É–¥–∏—Ç Clean Architecture |

---

## ‚úÖ –ß—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

### –§–∞–∑–∞ 10.1-10.3: –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (100%)

**–°–æ–∑–¥–∞–Ω–æ:**
- ‚úÖ `ConversationManagementService` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞–º–∏
- ‚úÖ `AgentCoordinationService` - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤
- ‚úÖ `PlanExecutionService` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤
- ‚úÖ Repositories –¥–ª—è –≤—Å–µ—Ö entities
- ‚úÖ Adapters –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–∞—è DDD –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

### –§–∞–∑–∞ 10.4: –ß–∞—Å—Ç–∏—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (60%)

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (35+ —Ñ–∞–π–ª–æ–≤)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ 15 —Ñ–∞–π–ª–æ–≤ —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (33K)
- ‚úÖ Legacy –∫–æ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞, –ø–ª–∞–Ω –§–∞–∑—ã 10.5 –≥–æ—Ç–æ–≤

---

## ‚è≥ –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å

### –§–∞–∑–∞ 10.5: –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (0%)

**–ó–∞–¥–∞—á–∏:**
1. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å Infrastructure Layer (11 —Ñ–∞–π–ª–æ–≤)
2. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å Application Layer (7 —Ñ–∞–π–ª–æ–≤)
3. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã (13 —Ñ–∞–π–ª–æ–≤)
4. ‚è≥ –£–¥–∞–ª–∏—Ç—å legacy –∫–æ–¥ (9 —Ñ–∞–π–ª–æ–≤)

**–û—Ü–µ–Ω–∫–∞:** 5-8 —á–∞—Å–æ–≤

**–ü–ª–∞–Ω:** 8 —ç—Ç–∞–ø–æ–≤ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –í—Ä–µ–º—è

| –§–∞–∑–∞ | –ü–ª–∞–Ω | –§–∞–∫—Ç | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |
|------|------|------|---------------|
| 10.1 | 14—á | 9—á | 156% |
| 10.2 | 7—á | 3.5—á | 200% |
| 10.3 | 3.5—á | 1—á | 350% |
| 10.4 | 2.5—á | 1—á | 250% |
| **–ò—Ç–æ–≥–æ** | **27—á** | **14.5—á** | **186%** |

### –ö–æ–¥

- **–°–æ–∑–¥–∞–Ω–æ:** 15+ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- **–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 15 —Ñ–∞–π–ª–æ–≤
- **–£–¥–∞–ª–µ–Ω–æ:** 3 backup —Ñ–∞–π–ª–∞
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** 50K+

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚úÖ
```
Domain Layer:         ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
Application Layer:    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
Infrastructure Layer: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
Legacy Code:          ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 60%
```

### –ö–∞—á–µ—Å—Ç–≤–æ ‚úÖ
- ‚úÖ –í—Å–µ —Å–ª–æ–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Dependency Injection –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞
- ‚úÖ Unit –∏ integration —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. Legacy –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (35+ —Ñ–∞–π–ª–æ–≤)

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:**
- Infrastructure: 11 —Ñ–∞–π–ª–æ–≤
- Application: 7 —Ñ–∞–π–ª–æ–≤
- Domain: 3 —Ñ–∞–π–ª–∞
- Tests: 13 —Ñ–∞–π–ª–æ–≤

**–†–µ—à–µ–Ω–∏–µ:** –§–∞–∑–∞ 10.5

### 2. –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

**–§–∞–π–ª:** `plan_repository_impl.py`

**–ü—Ä–æ–±–ª–µ–º–∞:** Legacy –∏ –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–∞ –≤ –§–∞–∑–µ 10.5

---

## üöÄ –ö–∞–∫ –Ω–∞—á–∞—Ç—å –§–∞–∑—É 10.5

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
cd codelab-ai-service/agent-runtime
git checkout -b feature/phase-10-5-legacy-cleanup
git add -A
git commit -m "WIP: Before legacy cleanup"
```

### –®–∞–≥ 2: Baseline —Ç–µ—Å—Ç—ã

```bash
pytest tests/ -v --tb=short > /tmp/tests-before.log
```

### –®–∞–≥ 3: –°–ª–µ–¥–æ–≤–∞—Ç—å –ø–ª–∞–Ω—É

üìñ –û—Ç–∫—Ä—ã—Ç—å [`agent-runtime-phase-10-5-legacy-cleanup-plan.md`](agent-runtime-phase-10-5-legacy-cleanup-plan.md)

### –®–∞–≥ 4: –†–∞–±–æ—Ç–∞—Ç—å –ø–æ —ç—Ç–∞–ø–∞–º

1. Infrastructure Layer (2 —á–∞—Å–∞)
2. Application Layer (1.5 —á–∞—Å–∞)
3. Adapters (30 –º–∏–Ω)
4. Domain - —É–¥–∞–ª–µ–Ω–∏–µ (1 —á–∞—Å)
5. Dependencies (30 –º–∏–Ω)
6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1.5 —á–∞—Å–∞)
7. –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è (30 –º–∏–Ω)

---

## üìû –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Dashboard –ø—Ä–æ–≥—Ä–µ—Å—Å–∞](PHASE_10_PROGRESS_DASHBOARD.md) - –ø–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞
- [–§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç 10.4](PHASE_10_4_FINAL_REPORT.md) - –¥–µ—Ç–∞–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ñ–∞–∑—ã
- [–ü–ª–∞–Ω 10.5](agent-runtime-phase-10-5-legacy-cleanup-plan.md) - —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ö–æ–¥
- –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: `app/domain/{conversation,agent_context,execution_context}/`
- Legacy –∫–æ–¥: `app/domain/{entities,repositories,services}/`
- Adapters: `app/infrastructure/adapters/`

### –¢–µ—Å—Ç—ã
- Unit —Ç–µ—Å—Ç—ã: `tests/unit/`
- Integration —Ç–µ—Å—Ç—ã: `tests/`

---

## üéì –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:

```python
# Agents –∏—Å–ø–æ–ª—å–∑—É—é—Ç alias
from app.domain.conversation.entities.conversation import Conversation as Session

# TYPE_CHECKING –¥–ª—è –Ω–æ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
if TYPE_CHECKING:
    from app.domain.execution_context.repositories.execution_plan_repository import (
        ExecutionPlanRepository,
    )
```

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

1. **–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** ‚úÖ
2. **–°–æ–∑–¥–∞—Ç—å adapters** ‚úÖ
3. **–û–±–Ω–æ–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã** ‚úÖ
4. **–û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** ‚è≥
5. **–£–¥–∞–ª–∏—Ç—å legacy –∫–æ–¥** ‚è≥

### –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫:

```bash
git reset --hard HEAD
git checkout develop
```

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–µ—Ç–∫–µ, –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞ –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç–∞.

---

## üìà –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –¥–Ω—è–º

| –î–∞—Ç–∞ | –§–∞–∑–∞ | –í—Ä–µ–º—è | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|------|------|-------|-----------|
| 4 —Ñ–µ–≤ | 10.1 | 9—á | ‚úÖ –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ |
| 5 —Ñ–µ–≤ | 10.2 | 3.5—á | ‚úÖ Repositories |
| 5 —Ñ–µ–≤ | 10.3 | 1—á | ‚úÖ Adapters |
| 6 —Ñ–µ–≤ | 10.4 | 1—á | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ |
| 7 —Ñ–µ–≤ | 10.5 | 5-8—á | ‚è≥ –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ |

---

## üéâ –ò—Ç–æ–≥–∏

**–§–∞–∑–∞ 10 –Ω–∞ 65% –∑–∞–≤–µ—Ä—à–µ–Ω–∞** —Å –æ—Ç–ª–∏—á–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏:

‚úÖ –ù–æ–≤–∞—è DDD –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞  
‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞  
‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∞–∑—ã –≥–æ—Ç–æ–≤  

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –§–∞–∑–∞ 10.5 - –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –æ—Ç Legacy –∫–æ–¥–∞

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** üü¢ 100% - –º–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å

---

**–í–æ–ø—Ä–æ—Å—ã?** –°–º–æ—Ç—Ä–∏ [Dashboard](PHASE_10_PROGRESS_DASHBOARD.md) –∏–ª–∏ [–§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç](PHASE_10_4_FINAL_REPORT.md)
