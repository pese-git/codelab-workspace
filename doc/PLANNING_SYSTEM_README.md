# –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è CodeLab Agent Runtime

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 1.0  
**–î–∞—Ç–∞:** 30 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** üü¢ Ready for Development

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á.

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ß–∏—Ç–∞—Ç—å |
|----------|---------|--------|
| **[–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](planning-system-architecture.md)** | –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –¥–∏–∞–≥—Ä–∞–º–º—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | ‚≠ê –ù–∞—á–Ω–∏—Ç–µ –æ—Ç—Å—é–¥–∞ |
| **[FSM Orchestrator](fsm-orchestrator-design.md)** | –ö–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∑–∞–¥–∞—á–∏ | [‚Üí](fsm-orchestrator-design.md) |
| **[Execution Engine](execution-engine-design.md)** | –î–≤–∏–∂–æ–∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ø–ª–∞–Ω–æ–≤ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ | [‚Üí](execution-engine-design.md) |
| **[Task Classifier](task-classifier-design.md)** | –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–¥–∞—á –Ω–∞ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ/–Ω–µ–∞—Ç–æ–º–∞—Ä–Ω—ã–µ | [‚Üí](task-classifier-design.md) |
| **[Plan Repository](plan-repository-design.md)** | –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–ª–∞–Ω–æ–≤ –≤ –ë–î | [‚Üí](plan-repository-design.md) |

---

## üéØ –¶–µ–ª—å —Å–∏—Å—Ç–µ–º—ã

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** –¥–ª—è –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã CodeLab, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π:

‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏  
‚úÖ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á –º–µ–∂–¥—É —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏  
‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫  
‚úÖ –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Å–∞–º–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π –∏ —Ü–∏–∫–ª–æ–≤ –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏  
‚úÖ –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–µ –∏ —É–ø—Ä–∞–≤–ª—è–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ LLM

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           SessionsRouter (API)              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    MessageOrchestrationService (Facade)     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ FSMOrchest.  ‚îÇ  ‚îÇTaskClassif.  ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇExecEngine    ‚îÇ  ‚îÇPlanRepo      ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Agent Layer (5 agents)             ‚îÇ
‚îÇ  Orchestrator, Coder, Architect,            ‚îÇ
‚îÇ  Debug, Ask                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìä –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. FSM Orchestrator
**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç**

–°–æ—Å—Ç–æ—è–Ω–∏—è:
- `IDLE` ‚Üí –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `CLASSIFY` ‚Üí –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (–∞—Ç–æ–º–∞—Ä–Ω–∞—è vs –Ω–µ–∞—Ç–æ–º–∞—Ä–Ω–∞—è)
- `PLAN_REQUIRED` ‚Üí –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–ª–∞–Ω
- `ARCHITECT_PLANNING` ‚Üí Architect —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞–Ω
- `EXECUTION` ‚Üí –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞
- `ERROR_HANDLING` ‚Üí –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
- `COMPLETED` ‚Üí –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ

üìñ [–î–µ—Ç–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω](fsm-orchestrator-design.md)

### 2. Task Classifier
**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏ –∏ —Ü–µ–ª–µ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞**

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç LLM –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- Fallback –Ω–∞ keyword matching
- **–ö–ª—é—á–µ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** `is_atomic=false` ‚Üí `agent=plan`

üìñ [–î–µ—Ç–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω](task-classifier-design.md)

### 3. Execution Engine
**–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏**

- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É subtasks
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –Ω–∞ —Ü–µ–ª–µ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ retry
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

üìñ [–î–µ—Ç–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω](execution-engine-design.md)

### 4. Plan Repository
**–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–ª–∞–Ω–æ–≤ –≤ –ë–î**

- SQLAlchemy –º–æ–¥–µ–ª–∏
- –ú–∏–≥—Ä–∞—Ü–∏—è Alembic
- –ú–∞–ø–ø–µ—Ä Domain ‚Üî DB

üìñ [–î–µ—Ç–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω](plan-repository-design.md)

---

## üîë –ö–ª—é—á–µ–≤—ã–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç 1: Single Source of Truth
- **–¢–æ–ª—å–∫–æ Orchestrator** –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –∞–≥–µ–Ω—Ç–æ–≤
- **–¢–æ–ª—å–∫–æ ExecutionEngine** —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ–º

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç 2: Agent Isolation
- –ê–≥–µ–Ω—Ç—ã **–Ω–µ –º–æ–≥—É—Ç** –≤—ã–∑—ã–≤–∞—Ç—å `switch_mode`
- –í—Å–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è **—Ç–æ–ª—å–∫–æ** —á–µ—Ä–µ–∑ FSM

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç 3: Plan Atomicity
- –ö–∞–∂–¥—ã–π subtask **–∞—Ç–æ–º–∞—Ä–Ω—ã–π**
- –ù–µ—Ç self-assignment –¥–ª—è Architect

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç 4: Determinism
- –û–¥–∏–Ω–∞–∫–æ–≤—ã–π input ‚Üí –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π output
- –°–∏—Å—Ç–µ–º–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üìã –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (Definition of Done)

- [ ] ‚úÖ –°–ª–æ–∂–Ω–∞—è –∑–∞–¥–∞—á–∞ –Ω–µ —É—Ö–æ–¥–∏—Ç –Ω–∞–ø—Ä—è–º—É—é –≤ Coder
- [ ] ‚úÖ Architect –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª–Ω—è—Ç—å –∫–æ–¥
- [ ] ‚úÖ –ù–µ—Ç self-switching –∞–≥–µ–Ω—Ç–æ–≤
- [ ] ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ FSM
- [ ] ‚úÖ –ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ

---

## üöÄ –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–§–∞–∑–∞ 1 (–ù–µ–¥–µ–ª—è 1):** –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞  
**–§–∞–∑–∞ 2 (–ù–µ–¥–µ–ª—è 2-3):** –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Classifier, Repository)  
**–§–∞–∑–∞ 3 (–ù–µ–¥–µ–ª—è 4-5):** Execution Engine  
**–§–∞–∑–∞ 4 (–ù–µ–¥–µ–ª—è 6):** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Orchestrator  
**–§–∞–∑–∞ 5 (–ù–µ–¥–µ–ª—è 7):** Runtime Guards –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è  
**–§–∞–∑–∞ 6 (–ù–µ–¥–µ–ª—è 8):** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

üìñ –ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω: —Å–º. [–ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](../DEVELOPMENT_PLAN.md)

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Python 3.10+**
- **FastAPI** - REST API
- **SQLAlchemy** - ORM
- **Alembic** - –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- **Pydantic** - –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **pytest** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **PostgreSQL/SQLite** - —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

---

## üìñ –ö–∞–∫ —á–∏—Ç–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö —Å –Ω—É–ª—è:

1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–∏—Å—Ç–µ–º—ã](planning-system-architecture.md) - –ø–æ–Ω–∏–º–∞–Ω–∏–µ –æ–±—â–µ–π –∫–∞—Ä—Ç–∏–Ω—ã
2. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –¥–∏–∑–∞–π–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ä–µ–∞–ª–∏–∑—É–µ—Ç–µ:
   - Task Classifier ‚Üí [task-classifier-design.md](task-classifier-design.md)
   - FSM Orchestrator ‚Üí [fsm-orchestrator-design.md](fsm-orchestrator-design.md)
   - Execution Engine ‚Üí [execution-engine-design.md](execution-engine-design.md)
   - Plan Repository ‚Üí [plan-repository-design.md](plan-repository-design.md)
3. –°–ª–µ–¥—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ñ–∞–π–ª–æ–≤ –∏ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º –º–µ—Ç–æ–¥–æ–≤
4. –ü–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã

### –î–ª—è code review:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ç–∏–≤ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∏–∑–∞–π–Ω—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Å—Ç—ã (>85% coverage)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üéì –í–∞–∂–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–¥–∞—á–∞
–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∞–≥–µ–Ω—Ç–æ–º –∑–∞ –æ–¥–∏–Ω —à–∞–≥:
- –ù–µ—Ç –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –ù–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- –ù–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- –ü—Ä–∏–º–µ—Ä: "Create a button component"

### –ù–µ–∞—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–¥–∞—á–∞
–¢—Ä–µ–±—É–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:
- –¢—Ä–µ–±—É–µ—Ç –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –¢—Ä–µ–±—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- –¢—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- –ü—Ä–∏–º–µ—Ä: "Design and implement authentication system"

### –ü—Ä–∞–≤–∏–ª–æ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
```
if is_atomic == false:
    agent MUST BE "plan"  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã
```bash
pytest tests/test_fsm_orchestrator.py -v
pytest tests/test_task_classifier.py -v
pytest tests/test_execution_engine.py -v
pytest tests/test_plan_repository.py -v
```

### Integration —Ç–µ—Å—Ç—ã
```bash
pytest tests/e2e/test_planning_workflow.py -v
```

### Coverage
```bash
pytest --cov=app tests/ --cov-report=html
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

- **Test Coverage:** > 85%
- **E2E Tests Pass Rate:** 100%
- **Performance:** plan execution < 5s overhead
- **Classification Accuracy:** > 90%
- **Plan Success Rate:** > 85%

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [–ê—É–¥–∏—Ç —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](../doc/audit-report.md)
- [–ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](../DEVELOPMENT_PLAN.md)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Agent Runtime](../agent-runtime/README.md)

---

## üí° –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ü–æ—á–µ–º—É Architect –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ subtask?**  
A: Architect - —ç—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫, –∞ –Ω–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å. –û–Ω –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏ —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞–Ω—ã. –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ - —ç—Ç–æ —Ä–∞–±–æ—Ç–∞ –¥–ª—è Coder, Debug –∏ Ask.

**Q: –ü–æ—á–µ–º—É —É –≤—Å–µ—Ö –Ω–µ–∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –∑–∞–¥–∞—á agent = "plan"?**  
A: –ü–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ–∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Ç—Ä–µ–±—É—é—Ç –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏. –¢–æ–ª—å–∫–æ Architect –º–æ–∂–µ—Ç —Ä–∞–∑–±–∏—Ç—å —Å–ª–æ–∂–Ω—É—é –∑–∞–¥–∞—á—É –Ω–∞ subtasks.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ subtask –ø–∞–¥–∞–µ—Ç?**  
A: ExecutionEngine –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –≤ Debug –∞–≥–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –æ—à–∏–±–∫–∏.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å subtasks –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ?**  
A: –î–∞, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã (–Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –Ω–∏–º–∏).

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **Architecture:** Sergey Penkovsky
- **Questions:** –°–æ–∑–¥–∞–≤–∞–π—Ç–µ issues –≤ GitHub

---

**Last updated:** 30 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready for Development
