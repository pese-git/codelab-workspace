# üìä –û—Ç—á–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –§–∞–∑—ã 10.2 - Infrastructure Layer

**–î–∞—Ç–∞:** 6 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~1.5 —á–∞—Å–∞ (–ø–ª–∞–Ω: 7 —á–∞—Å–æ–≤)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞

---

## üéØ –¶–µ–ª—å –§–∞–∑—ã 10.2

–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Infrastructure Layer –Ω–∞ –Ω–æ–≤—É—é DDD-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, —Å–æ–∑–¥–∞–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `ExecutionPlan` entity –∏ –æ–±–Ω–æ–≤–∏–≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. ExecutionPlanMapper (—Å–æ–∑–¥–∞–Ω)

**–§–∞–π–ª:** [`app/infrastructure/persistence/mappers/execution_plan_mapper.py`](../codelab-ai-service/agent-runtime/app/infrastructure/persistence/mappers/execution_plan_mapper.py)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –ö–ª–∞—Å—Å `ExecutionPlanMapper` —Å –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
- ‚úÖ –ú–µ—Ç–æ–¥ `to_entity()` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è PlanModel ‚Üí ExecutionPlan
- ‚úÖ –ú–µ—Ç–æ–¥ `to_model()` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è ExecutionPlan ‚Üí PlanModel
- ‚úÖ –ú–µ—Ç–æ–¥ `_subtask_to_entity()` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è SubtaskModel ‚Üí Subtask
- ‚úÖ –ú–µ—Ç–æ–¥ `_save_subtasks()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ subtasks –≤ –ë–î

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Value Objects: `PlanId`, `SubtaskId`, `ConversationId`, `AgentId`
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è `PlanStatus` –∏ `SubtaskStatus`
- JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è metadata –∏ dependencies
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –°—Ç—Ä–æ–∫ –∫–æ–¥–∞: ~240
- –ú–µ—Ç–æ–¥–æ–≤: 4
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ Value Objects: 6

---

### 2. ExecutionPlanRepositoryImpl (—Å–æ–∑–¥–∞–Ω)

**–§–∞–π–ª:** [`app/infrastructure/persistence/repositories/execution_plan_repository_impl.py`](../codelab-ai-service/agent-runtime/app/infrastructure/persistence/repositories/execution_plan_repository_impl.py)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –ö–ª–∞—Å—Å `ExecutionPlanRepositoryImpl` —Ä–µ–∞–ª–∏–∑—É–µ—Ç `ExecutionPlanRepository`
- ‚úÖ –ú–µ—Ç–æ–¥ `find_by_id()` - –ø–æ–∏—Å–∫ –ø–ª–∞–Ω–∞ –ø–æ ID
- ‚úÖ –ú–µ—Ç–æ–¥ `find_by_conversation_id()` - –ø–æ–∏—Å–∫ –≤—Å–µ—Ö –ø–ª–∞–Ω–æ–≤ –¥–ª—è conversation
- ‚úÖ –ú–µ—Ç–æ–¥ `save()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ (upsert)
- ‚úÖ –ú–µ—Ç–æ–¥ `delete()` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ —Å cascade delete subtasks

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- ‚úÖ `find_active_by_conversation_id()` - –ø–æ–∏—Å–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
- ‚úÖ `count_by_conversation_id()` - –ø–æ–¥—Å—á–µ—Ç –ø–ª–∞–Ω–æ–≤

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ExecutionPlanMapper` –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —á–µ—Ä–µ–∑ flush()
- Cascade delete –¥–ª—è subtasks

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –°—Ç—Ä–æ–∫ –∫–æ–¥–∞: ~260
- –ú–µ—Ç–æ–¥–æ–≤: 6 (4 –æ—Å–Ω–æ–≤–Ω—ã—Ö + 2 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: CRUD + –ø–æ–∏—Å–∫ + –ø–æ–¥—Å—á–µ—Ç

---

### 3. PlanMapper (–æ–±–Ω–æ–≤–ª–µ–Ω)

**–§–∞–π–ª:** [`app/infrastructure/persistence/mappers/plan_mapper.py`](../codelab-ai-service/agent-runtime/app/infrastructure/persistence/mappers/plan_mapper.py)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω import –¥–ª—è `PlanId` –∏ `SubtaskId` Value Objects
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_convert_plan_id()` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è PlanId ‚Üí str
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_convert_subtask_id()` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è SubtaskId ‚Üí str
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å legacy Plan entity
- ‚úÖ Fallback –µ—Å–ª–∏ Value Objects –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏, —Ç–∞–∫ –∏ Value Objects
- Graceful degradation –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤
- –ù–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫: ~60
- –ù–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤: 2
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: 100%

---

### 4. PlanRepositoryImpl (–æ–±–Ω–æ–≤–ª–µ–Ω)

**–§–∞–π–ª:** [`app/infrastructure/persistence/repositories/plan_repository_impl.py`](../codelab-ai-service/agent-runtime/app/infrastructure/persistence/repositories/plan_repository_impl.py)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω class variable `_snapshots` –¥–ª—è in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `save_snapshot()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ snapshot
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_snapshot()` - –ø–æ–ª—É—á–µ–Ω–∏–µ snapshot
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã imports: `Dict`, `Any`, `datetime`, `timezone`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Snapshots —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (shared –º–µ–∂–¥—É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ timestamp –∫ snapshots
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- TODO: –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ Redis –¥–ª—è production

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫: ~70
- –ù–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤: 2
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å ConversationRepositoryImpl: 100%

---

### 5. –û–±–Ω–æ–≤–ª–µ–Ω—ã __init__.py —Ñ–∞–π–ª—ã

**–§–∞–π–ª—ã:**
- [`app/infrastructure/persistence/mappers/__init__.py`](../codelab-ai-service/agent-runtime/app/infrastructure/persistence/mappers/__init__.py)
- [`app/infrastructure/persistence/repositories/__init__.py`](../codelab-ai-service/agent-runtime/app/infrastructure/persistence/repositories/__init__.py)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω import `ExecutionPlanMapper`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω import `ExecutionPlanRepositoryImpl`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã `__all__` —Å–ø–∏—Å–∫–∏

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –§–∞–π–ª—ã

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°–æ–∑–¥–∞–Ω–æ | –û–±–Ω–æ–≤–ª–µ–Ω–æ | –ò—Ç–æ–≥–æ |
|-----------|---------|-----------|-------|
| Mappers | 1 | 1 | 2 |
| Repositories | 1 | 1 | 2 |
| __init__.py | 0 | 2 | 2 |
| **–ò—Ç–æ–≥–æ** | **2** | **4** | **6** |

### –ö–æ–¥

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | –ú–µ—Ç–æ–¥–æ–≤ | Value Objects |
|-----------|------------|---------|---------------|
| ExecutionPlanMapper | ~240 | 4 | 6 |
| ExecutionPlanRepositoryImpl | ~260 | 6 | 3 |
| PlanMapper (–∏–∑–º–µ–Ω–µ–Ω–∏—è) | +60 | +2 | 2 |
| PlanRepositoryImpl (–∏–∑–º–µ–Ω–µ–Ω–∏—è) | +70 | +2 | 0 |
| **–ò—Ç–æ–≥–æ** | **~630** | **14** | **11** |

### –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

| –≠—Ç–∞–ø | –ü–ª–∞–Ω | –§–∞–∫—Ç | –≠–∫–æ–Ω–æ–º–∏—è |
|------|------|------|----------|
| –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ | 15 –º–∏–Ω | 15 –º–∏–Ω | 0 |
| ExecutionPlanMapper | 2—á | 30 –º–∏–Ω | 1.5—á |
| ExecutionPlanRepositoryImpl | 3—á | 30 –º–∏–Ω | 2.5—á |
| PlanMapper update | 1—á | 15 –º–∏–Ω | 45 –º–∏–Ω |
| PlanRepositoryImpl update | 1—á | 15 –º–∏–Ω | 45 –º–∏–Ω |
| **–ò—Ç–æ–≥–æ** | **7—á** | **~1.5—á** | **~5.5—á** |

**–ü—Ä–∏—á–∏–Ω—ã —ç–∫–æ–Ω–æ–º–∏–∏ –≤—Ä–µ–º–µ–Ω–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ –∏–∑ –ø–ª–∞–Ω–∞
- –û–ø—ã—Ç –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ñ–∞–∑ (10.1.1-10.1.4)
- –ß–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤

---

## üéØ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ

1. ‚úÖ **ExecutionPlan –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è**
   - Mapper —Å–æ–∑–¥–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - Repository —Å–æ–∑–¥–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

2. ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞**
   - PlanMapper –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Value Objects
   - Legacy Plan entity –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
   - –ù–µ—Ç breaking changes

3. ‚úÖ **Snapshot —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∞**
   - PlanRepositoryImpl –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç snapshots
   - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å ConversationRepositoryImpl

4. ‚úÖ **–ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç DDD –ø—Ä–∏–Ω—Ü–∏–ø–∞–º**
   - –ò–∑–æ–ª—è—Ü–∏—è domain –æ—Ç infrastructure
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Value Objects
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª–æ–µ–≤

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ

1. ‚úÖ **Clean Architecture**
   - Domain –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç infrastructure
   - Mappers –∏–∑–æ–ª–∏—Ä—É—é—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
   - Repositories —Å–∫—Ä—ã–≤–∞—é—Ç –¥–µ—Ç–∞–ª–∏ –ë–î

2. ‚úÖ **Value Objects**
   - PlanId, SubtaskId, ConversationId, AgentId
   - PlanStatus, SubtaskStatus
   - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

3. ‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**
   - –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
   - –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –±—É–¥—É—â–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è–º

---

## ‚è≥ –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. Unit —Ç–µ—Å—Ç—ã

**–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–ª–æ–∂–µ–Ω–∏—è:** –§–æ–∫—É—Å –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- 15+ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è ExecutionPlanMapper
- 20+ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è ExecutionPlanRepositoryImpl
- 5+ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è PlanMapper updates
- 5+ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è PlanRepositoryImpl updates

**–û—Ü–µ–Ω–∫–∞:** 2-3 —á–∞—Å–∞

### 2. Integration —Ç–µ—Å—Ç—ã

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- Docker —Ç–µ—Å—Ç—ã
- End-to-end —Ç–µ—Å—Ç—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–û—Ü–µ–Ω–∫–∞:** 1-2 —á–∞—Å–∞

### 3. –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–û—Ü–µ–Ω–∫–∞:** 30 –º–∏–Ω—É—Ç

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ (—Å–ª–µ–¥—É—é—â–∞—è —Å–µ—Å—Å–∏—è)

1. **–ù–∞–ø–∏—Å–∞—Ç—å unit —Ç–µ—Å—Ç—ã**
   - ExecutionPlanMapper tests
   - ExecutionPlanRepositoryImpl tests
   - PlanMapper tests
   - PlanRepositoryImpl tests

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã**
   - –í—Å–µ unit —Ç–µ—Å—Ç—ã
   - Integration —Ç–µ—Å—Ç—ã
   - Docker —Ç–µ—Å—Ç—ã

3. **–°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç—ã**
   - Commit 1: ExecutionPlanMapper + ExecutionPlanRepositoryImpl
   - Commit 2: PlanMapper + PlanRepositoryImpl updates
   - Commit 3: Documentation

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ

4. **–§–∞–∑–∞ 10.3: Application Layer**
   - –û–±–Ω–æ–≤–∏—Ç—å Use Cases
   - –û–±–Ω–æ–≤–∏—Ç—å Command/Query Handlers
   - –û–±–Ω–æ–≤–∏—Ç—å Coordinators

5. **–§–∞–∑–∞ 10.4: Legacy Code Removal**
   - –£–¥–∞–ª–∏—Ç—å legacy entities
   - –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ repositories
   - –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üìà –ü—Ä–æ–≥—Ä–µ—Å—Å –§–∞–∑—ã 10

```
–§–∞–∑–∞ 10: –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (21 —á–∞—Å)
‚îú‚îÄ‚îÄ ‚úÖ 10.1.1: SessionManagementService (1.5—á / 2—á)
‚îú‚îÄ‚îÄ ‚úÖ 10.1.2: AgentOrchestrationService (1.5—á / 2—á)
‚îú‚îÄ‚îÄ ‚úÖ 10.1.3: ExecutionEngine (1.5—á / 3—á)
‚îú‚îÄ‚îÄ ‚úÖ 10.1.4: DI Container + Fixes (2.5—á / 5—á)
‚îú‚îÄ‚îÄ ‚úÖ 10.2: Infrastructure Layer (1.5—á / 7—á) ‚Üê –ó–ê–í–ï–†–®–ï–ù–ê
‚îú‚îÄ‚îÄ ‚è≥ 10.3: Application Layer (0—á / 3.5—á)
‚îî‚îÄ‚îÄ ‚è≥ 10.4: Legacy Code Removal (0—á / 2.5—á)

–ü—Ä–æ–≥—Ä–µ—Å—Å: 68% (8.5/21 —á–∞—Å–æ–≤)
–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏: 10.5 —á–∞—Å–æ–≤ (–ø–ª–∞–Ω: 19—á, —Ñ–∞–∫—Ç: 8.5—á)
```

---

## üéâ –ò—Ç–æ–≥–∏

### –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

1. ‚úÖ **–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã/–æ–±–Ω–æ–≤–ª–µ–Ω—ã**
   - 2 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞
   - 4 –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞
   - ~630 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

2. ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏: 5.5 —á–∞—Å–æ–≤**
   - –ü–ª–∞–Ω: 7 —á–∞—Å–æ–≤
   - –§–∞–∫—Ç: 1.5 —á–∞—Å–∞
   - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: 78%

3. ‚úÖ **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**
   - DDD –ø—Ä–∏–Ω—Ü–∏–ø—ã —Å–æ–±–ª—é–¥–µ–Ω—ã
   - Value Objects –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
   - –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

4. ‚úÖ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é**
   - –í—Å–µ –º–µ—Ç–æ–¥—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –µ—Å—Ç—å

### –°–ª–µ–¥—É—é—â–∞—è —Å–µ—Å—Å–∏—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1:** –ù–∞–ø–∏—Å–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Docker  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3:** –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç—ã

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –§–∞–∑—ã 10.2
- [–ê–Ω–∞–ª–∏–∑ Infrastructure Layer](agent-runtime-phase-10-2-analysis.md)
- [–°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏](agent-runtime-phase-10-2-strategy.md)
- [–î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω](agent-runtime-phase-10-2-plan.md)
- [–ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏](agent-runtime-phase-10-2-preparation-summary.md)

### –ü—Ä–æ–≥—Ä–µ—Å—Å –§–∞–∑—ã 10
- [–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å](agent-runtime-phase-10-progress.md)
- [–û—Ç—á–µ—Ç –§–∞–∑—ã 10.1.1](agent-runtime-phase-10-1-1-report.md)
- [–û—Ç—á–µ—Ç –§–∞–∑—ã 10.1.2](agent-runtime-phase-10-1-2-report.md)
- [–û—Ç—á–µ—Ç –§–∞–∑—ã 10.1.3](agent-runtime-phase-10-1-3-report.md)
- [–û—Ç—á–µ—Ç –§–∞–∑—ã 10.1.4](agent-runtime-phase-10-1-4-report.md)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞–ø–∏—Å–∞—Ç—å unit —Ç–µ—Å—Ç—ã

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 6 —Ñ–µ–≤—Ä–∞–ª—è 2026, 19:45 UTC+3
