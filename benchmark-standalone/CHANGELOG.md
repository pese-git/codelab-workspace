# Changelog

Все значимые изменения в проекте benchmark-standalone документируются в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/lang/ru/).

## [1.0.0] - 2026-01-21

### Добавлено

#### Документация
- Актуализирована структура документации
- Создана директория `doc/` для технической документации
- Обновлен `README.md` с актуальной информацией о проекте
- Добавлен `CHANGELOG.md` для отслеживания изменений

#### Аутентификация
- Поддержка JWT OAuth2 аутентификации
- Поддержка Internal API Key аутентификации
- Автоматическое обновление JWT токенов при получении 401
- Thread-safe механизм обновления токенов
- Fallback на полную повторную аутентификацию при ошибках refresh

#### Основные компоненты
- `AuthManager` - управление аутентификацией с поддержкой двух режимов
- `GatewayClient` - WebSocket клиент с автоматическим retry при 401
- `MockToolExecutor` - локальное выполнение tools
- `TaskValidator` - автоматическая валидация результатов
- `MetricsCollector` - сбор метрик в SQLite
- `ReportGenerator` - генерация Markdown отчетов

#### Метрики
- Сбор метрик LLM вызовов (токены, модель, длительность)
- Сбор метрик tool вызовов (успешность, длительность)
- Отслеживание переключений агентов
- Оценка качества выполнения задач
- Детектирование галлюцинаций

#### Инструменты разработки
- Интеграция с `uv` package manager
- Настройка `ruff` для linting и форматирования
- Настройка `ty` для type checking
- Настройка `pytest` для тестирования

### Изменено

#### Конфигурация
- Обновлен `config.yaml` с поддержкой JWT аутентификации
- Добавлены настройки для работы через nginx (порт 80)
- Настроены пути к tasks-samples и _test_project

#### Клиент Gateway
- Переработан для работы с новым API Gateway
- Добавлена поддержка создания сессий через HTTP
- Улучшена обработка ошибок и timeout
- Добавлен лимит на количество tool calls (100)
- Динамический timeout для complex задач (300s)

#### Структура проекта
- Перенесены примеры задач в `tasks-samples/`
- Тестовый проект перемещен в `_test_project/`
- Создана директория `doc/` для документации

### Исправлено

- Исправлена обработка 401 ошибок с автоматическим retry
- Исправлена race condition при одновременном обновлении токенов
- Улучшена обработка timeout для сложных задач
- Исправлена валидация задач с ожиданием завершения file operations

### Удалено

- Устаревшие документы перемещены в `doc/` или удалены
- Удалены неактуальные примеры и временные файлы

## [0.1.0] - 2026-01-13

### Добавлено

- Первоначальная реализация benchmark-standalone
- Базовая структура проекта
- WebSocket клиент для Gateway
- Система сбора метрик
- Автоматическая валидация задач
- Генерация отчетов

---

## Типы изменений

- `Добавлено` - для новой функциональности
- `Изменено` - для изменений в существующей функциональности
- `Устарело` - для функциональности, которая скоро будет удалена
- `Удалено` - для удаленной функциональности
- `Исправлено` - для исправления ошибок
- `Безопасность` - для исправлений уязвимостей
